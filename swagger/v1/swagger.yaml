---
openapi: 3.0.1
info:
  title: Spree V2 Backend API
  version: v1
  description: API documentation for Spree V2 Backend
paths:
  "/api/auth/sign_in":
    post:
      summary: User login
      tags:
      - Authentication
      description: Authenticate a user and return JWT tokens
      parameters: []
      responses:
        '201':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Login successful
                  data:
                    type: object
                    properties:
                      user:
                        type: object
                        properties:
                          id:
                            type: integer
                          email:
                            type: string
                          created_at:
                            type: string
                          updated_at:
                            type: string
                      refresh_token:
                        type: string
        '401':
          description: Authentication failed
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: fail
                  message:
                    type: string
                  errors:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                account_user:
                  type: object
                  properties:
                    email:
                      type: string
                      example: user@example.com
                    password:
                      type: string
                      example: password123
                  required:
                  - email
                  - password
  "/api/auth/sign_out":
    post:
      summary: User logout
      tags:
      - Authentication
      description: Logout a user and revoke tokens
      security:
      - bearerAuth: []
      parameters: []
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Logged out successfully
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                account_user:
                  type: object
                  properties:
                    refresh_token:
                      type: string
  "/api/client/products":
    get:
      summary: List products
      tags:
      - Client Products
      description: Get a list of products with optional filtering and pagination
      parameters:
      - name: page
        in: query
        required: false
        description: Page number
        example: 1
        schema:
          type: integer
      - name: query
        in: query
        required: false
        description: Search query
        example: laptop
        schema:
          type: string
      - name: min_price
        in: query
        required: false
        description: Minimum price
        example: 100
        schema:
          type: number
      - name: max_price
        in: query
        required: false
        description: Maximum price
        example: 1000
        schema:
          type: number
      - name: attribute_value_ids
        in: query
        items:
          type: integer
        required: false
        description: Attribute value IDs
        example:
        - 1
        - 2
        schema:
          type: array
      - name: categories_ids
        in: query
        items:
          type: integer
        required: false
        description: Category IDs
        example:
        - 1
        - 2
        schema:
          type: array
      - name: sort
        in: query
        required: false
        description: "Sort option:\n * `price_asc` \n * `price_desc` \n "
        enum:
        - price_asc
        - price_desc
        example: price_asc
        schema:
          type: string
      responses:
        '200':
          description: Products retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Get all products successfully
                  data:
                    type: object
                    properties:
                      products:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            name:
                              type: string
                            slug:
                              type: string
                            description:
                              type: string
                            brand:
                              type: string
                            created_at:
                              type: string
                            updated_at:
                              type: string
                  meta:
                    type: object
                    properties:
                      current_page:
                        type: integer
                      next_page:
                        type: integer
                        nullable: true
                      prev_page:
                        type: integer
                        nullable: true
                      total_pages:
                        type: integer
                      total_count:
                        type: integer
                      per_page:
                        type: integer
                      is_first_page:
                        type: boolean
                      is_last_page:
                        type: boolean
  "/api/client/products/{id}":
    get:
      summary: Show product
      tags:
      - Client Products
      description: Get a single product by slug
      parameters:
      - name: id
        in: path
        description: Product slug
        example: laptop-dell-xps-15
        required: true
        schema:
          type: string
      responses:
        '200':
          description: Product retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
                  message:
                    type: string
                    example: Get product successfully!
                  data:
                    type: object
                    properties:
                      product:
                        type: object
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
                          slug:
                            type: string
                          description:
                            type: string
                          brand:
                            type: string
                      related_products:
                        type: array
                        nullable: true
                        items:
                          type: object
        '404':
          description: Product not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: fail
                  message:
                    type: string
servers:
- url: http://localhost:3000
  description: Development server
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
